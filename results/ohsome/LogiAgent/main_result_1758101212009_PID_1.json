{"all_cnt": 6, "all_request_sequence": [{"method": "GET", "api": "/elements/length/groupBy/tag", "url": "https://api.ohsome.org/v1/elements/length/groupBy/tag", "headers": {"Content-Type": "application/json"}, "params": {"groupByKey": "highway", "filter": "type=way and highway=primary", "format": "json", "showMetadata": "true"}, "payload": {}, "payload_type": "application/json", "request_data": "method='GET' api='/elements/length/groupBy/tag' params={'groupByKey': 'highway', 'filter': 'type=way and highway=primary', 'format': 'json', 'showMetadata': 'true'} payload={}", "response_code": 400, "response_data": "{\"timestamp\":\"2025-09-17T09:25:33.645873933\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?groupByKey=highway&filter=type%3Dway+and+highway%3Dprimary&format=json&showMetadata=true\"}"}, {"method": "GET", "api": "/elements/length/groupBy/tag", "url": "https://api.ohsome.org/v1/elements/length/groupBy/tag", "headers": {"Content-Type": "application/json"}, "params": {"groupByKey": "highway", "filter": "type=way and highway=primary", "format": "json", "showMetadata": "true"}, "payload": {}, "payload_type": "application/json", "request_data": "method='GET' api='/elements/length/groupBy/tag' params={'groupByKey': 'highway', 'filter': 'type=way and highway=primary', 'format': 'json', 'showMetadata': 'true'} payload={}", "response_code": 400, "response_data": "{\"timestamp\":\"2025-09-17T09:25:45.634797781\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?groupByKey=highway&filter=type%3Dway+and+highway%3Dprimary&format=json&showMetadata=true\"}"}, {"method": "GET", "api": "/elements/length/groupBy/tag", "url": "https://api.ohsome.org/v1/elements/length/groupBy/tag", "headers": {"Content-Type": "application/json"}, "params": {"bboxes": "47.3769,8.5417,47.3779,8.5428", "groupByKey": "highway", "format": "json", "showMetadata": "true"}, "payload": {}, "payload_type": "application/json", "request_data": "method='GET' api='/elements/length/groupBy/tag' params={'bboxes': '47.3769,8.5417,47.3779,8.5428', 'groupByKey': 'highway', 'format': 'json', 'showMetadata': 'true'} payload={}", "response_code": 400, "response_data": "{\"timestamp\":\"2025-09-17T09:25:56.993893735\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=47.3769%2C8.5417%2C47.3779%2C8.5428&groupByKey=highway&format=json&showMetadata=true\"}"}, {"method": "GET", "api": "/elements/length/groupBy/tag", "url": "https://api.ohsome.org/v1/elements/length/groupBy/tag", "headers": {"Content-Type": "application/json"}, "params": {"bboxes": "8.5417,47.3769,8.5428,47.3779", "groupByKey": "highway", "format": "json", "showMetadata": "true"}, "payload": {}, "payload_type": "application/json", "request_data": "method='GET' api='/elements/length/groupBy/tag' params={'bboxes': '8.5417,47.3769,8.5428,47.3779', 'groupByKey': 'highway', 'format': 'json', 'showMetadata': 'true'} payload={}", "response_code": 400, "response_data": "{\"timestamp\":\"2025-09-17T09:26:08.047479015\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=8.5417%2C47.3769%2C8.5428%2C47.3779&groupByKey=highway&format=json&showMetadata=true\"}"}, {"method": "GET", "api": "/elements/length/groupBy/tag", "url": "https://api.ohsome.org/v1/elements/length/groupBy/tag", "headers": {"Content-Type": "application/json"}, "params": {"bboxes": "8.5417,47.3769,8.5428,47.3779", "groupByKey": "highway", "filter": "type=way and highway=primary", "format": "json", "showMetadata": "true"}, "payload": {}, "payload_type": "application/json", "request_data": "method='GET' api='/elements/length/groupBy/tag' params={'bboxes': '8.5417,47.3769,8.5428,47.3779', 'groupByKey': 'highway', 'filter': 'type=way and highway=primary', 'format': 'json', 'showMetadata': 'true'} payload={}", "response_code": 400, "response_data": "{\"timestamp\":\"2025-09-17T09:26:21.722622093\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=8.5417%2C47.3769%2C8.5428%2C47.3779&groupByKey=highway&filter=type%3Dway+and+highway%3Dprimary&format=json&showMetadata=true\"}"}, {"method": "GET", "api": "/elements/length/groupBy/tag", "url": "https://api.ohsome.org/v1/elements/length/groupBy/tag", "headers": {"Content-Type": "application/json"}, "params": {"bboxes": "8.5417,47.3769,8.5428,47.3779", "groupByKey": "unknown_tag", "format": "json", "showMetadata": "true"}, "payload": {}, "payload_type": "application/json", "request_data": "method='GET' api='/elements/length/groupBy/tag' params={'bboxes': '8.5417,47.3769,8.5428,47.3779', 'groupByKey': 'unknown_tag', 'format': 'json', 'showMetadata': 'true'} payload={}", "response_code": 400, "response_data": "{\"timestamp\":\"2025-09-17T09:26:36.789391621\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=8.5417%2C47.3769%2C8.5428%2C47.3779&groupByKey=unknown_tag&format=json&showMetadata=true\"}"}], "right_results": [], "wrong_results": [{"request_info": "GET /elements/length/groupBy/tag with parameters groupByKey=highway, filter=type=way and highway=primary, format=json, showMetadata=true", "oracle": "HTTP 200 OK with a JSON object containing multiple tag values as keys and their corresponding numeric length aggregations. No missing expected tags or empty values.", "judge_reason": "The actual response is HTTP 400 Bad Request, indicating the request failed with an unsupported content-type header error despite being a GET request with no body. This behavior violates standard HTTP GET request expectations and prevents obtaining any meaningful data aggregation, thus the response does not fulfill the expected success criteria. This was confirmed as a known issue by the API documentation. Therefore, the response significantly deviates from expectations, impacting the core functionality of retrieving length aggregations grouped by tag.", "response": "HTTP 400 {\"timestamp\":\"2025-09-17T09:25:33.645873933\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?groupByKey=highway&filter=type%3Dway+and+highway%3Dprimary&format=json&showMetadata=true\"}"}, {"request_info": "GET /elements/length/groupBy/tag with parameters groupByKey=highway, filter=type=way and highway=primary, format=json, showMetadata=true, and header Content-Type: application/json", "oracle": "HTTP 200 OK with a JSON object containing multiple tag values as keys and their corresponding numeric length aggregations. No missing expected tags or empty values.", "judge_reason": "Explicitly setting 'Content-Type: application/json' header on the GET request results in HTTP 400 Bad Request with an unsupported content-type header message. This confirms the API improperly validates or restricts content-type headers on GET requests, blocking valid calls. No aggregation data is returned, preventing fulfilling the functional requirement. This issue limits standard API client usage and violates HTTP conventions, thus incompatible with expected behavior.", "response": "HTTP 400 {\"timestamp\":\"2025-09-17T09:25:45.634797781\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?groupByKey=highway&filter=type%3Dway+and+highway%3Dprimary&format=json&showMetadata=true\"}"}, {"request_info": "GET /elements/length/groupBy/tag with parameters bboxes=47.3769,8.5417,47.3779,8.5428, groupByKey=highway, format=json, showMetadata=true", "oracle": "HTTP 200 OK with a JSON object containing multiple tag values as keys and their corresponding numeric length aggregations. No missing expected tags or empty values.", "judge_reason": "Even when the required boundary parameter 'bboxes' is provided, the API returns HTTP 400 Bad Request with an unsupported content-type header error message. This prevents retrieval of any length aggregation data, thereby violating the expected behavior for this endpoint. The issue is consistent with previously observed errors, confirming a critical flaw in API header validation that blocks valid GET requests.", "response": "HTTP 400 {\"timestamp\":\"2025-09-17T09:25:56.993893735\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=47.3769%2C8.5417%2C47.3779%2C8.5428&groupByKey=highway&format=json&showMetadata=true\"}"}, {"request_info": "GET /elements/length/groupBy/tag with parameters bboxes=8.5417,47.3769,8.5428,47.3779, groupByKey=highway, format=json, showMetadata=true", "oracle": "HTTP 200 OK with a JSON object containing multiple tag values as keys and their corresponding numeric length aggregations. No missing expected tags or empty values.", "judge_reason": "Swapping longitude and latitude order in the bounding box parameter does not resolve the issue; the API still rejects the request with HTTP 400 and an unsupported content-type header error. This implies the rejection is independent of bbox formatting and caused by the server's incorrect validation of headers. No length aggregation data is returned, thus the functional requirements are unmet. This discrepancy confirms a critical defect in the API behavior.", "response": "HTTP 400 {\"timestamp\":\"2025-09-17T09:26:08.047479015\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=8.5417%2C47.3769%2C8.5428%2C47.3779&groupByKey=highway&format=json&showMetadata=true\"}"}, {"request_info": "Repeated GET /elements/length/groupBy/tag with parameters bboxes=8.5417,47.3769,8.5428,47.3779, groupByKey=highway, filter=type=way and highway=primary, format=json, showMetadata=true", "oracle": "HTTP 200 OK with response body logically consistent with initial retrieval data, showing length aggregations grouped by tag.", "judge_reason": "The API responds identically with HTTP 400 Bad Request status and an unsupported content-type header error on repeated calls with the same parameters as initial request. This shows stable, consistent error handling without data drift, but the repeated error prevents retrieving expected aggregation data, blocking validation of true idempotency and data stability. The API's incorrect validation of content-type headers in GET requests is a critical limitation.", "response": "HTTP 400 {\"timestamp\":\"2025-09-17T09:26:21.722622093\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=8.5417%2C47.3769%2C8.5428%2C47.3779&groupByKey=highway&filter=type%3Dway+and+highway%3Dprimary&format=json&showMetadata=true\"}"}, {"request_info": "GET /elements/length/groupBy/tag with parameters bboxes=8.5417,47.3769,8.5428,47.3779, groupByKey=unknown_tag, format=json, showMetadata=true", "oracle": "HTTP 200 OK with an empty JSON object or zero-value lengths indicating no data for the unknown tag.", "judge_reason": "The API returns HTTP 400 Bad Request with an unsupported content-type header error when requesting with a non-existent tag 'unknown_tag'. It does not return a 200 OK nor an empty result as expected, reflecting a lack of graceful handling of missing tags. Additionally, the error message is generic and unrelated to tag validation, confirming a known issue that reduces error clarity. This response significantly deviates from the expected behavior and blocks correct functional validation.", "response": "HTTP 400 {\"timestamp\":\"2025-09-17T09:26:36.789391621\",\"status\":400,\"message\":\"Unsupported content-type header found. Please make sure to use either 'multipart/form-data' or 'application/x-www-form-urlencoded'.\",\"requestUrl\":\"https://api.ohsome.org/v1/elements/length/groupBy/tag?bboxes=8.5417%2C47.3769%2C8.5428%2C47.3779&groupByKey=unknown_tag&format=json&showMetadata=true\"}"}], "test_scenario_response_message": "1. **Title:** Verify Length Aggregation Consistency and Tag Filtering Over Multiple Sequential Requests\n   - **API Endpoint:** GET /elements/length/groupBy/tag\n   - **Description:** Perform an initial request to retrieve the length of OSM elements grouped by a common tag (e.g., highway), expecting a detailed breakdown of element lengths by tag value. This step establishes a baseline dataset.\n   - **Expected Response:** HTTP 200 OK with a JSON response containing multiple tag values as keys and their corresponding length aggregations as numeric values. No missing expected tags and no unexpected empty values.\n\n2. **Title:** Validate Idempotency and Data Stability with Repetitive Calls Using the Same Tag Parameter\n   - **API Endpoint:** GET /elements/length/groupBy/tag\n   - **Description:** Repeatedly invoke the same API call with the identical tag parameter as step 1 to confirm the API returns consistent length groupings and values without data drift or unexpected changes.\n   - **Expected Response:** HTTP 200 OK with response bodies identical (or logically consistent) with step 1\u2019s result. Any differences must be accounted for by known real-time data updates; otherwise, flagged as inconsistency.\n\n3. **Title:** Test Tag Filter Sensitivity and Missing Tag Handling\n   - **API Endpoint:** GET /elements/length/groupBy/tag\n   - **Description:** Send a request with a tag parameter that is either uncommon or non-existent in the dataset (e.g., a made-up tag \u201cunknown_tag\u201d) to verify how the API handles tags that do not correspond to any elements.\n   - **Expected Response:** HTTP 200 OK with an empty or zero-length result set indicating no data for the provided tag. The API should not return errors or malformed data.\n\n4. **Title:** Examine Concurrent Requests with Different Tags to Detect State Leakage or Race Conditions\n   - **API Endpoint:** GET /elements/length/groupBy/tag\n   - **Description:** Simultaneously issue parallel GET requests with different tags (e.g., \u201chighway\u201d, \u201crailway\u201d, \u201cwaterway\u201d), then compare response times, data correctness, and absence of cross-request data contamination.\n   - **Expected Response:** Each request returns valid, isolated aggregation data corresponding to its tag without interference or corruption. No race conditions or server errors such as 500 Internal Server Error.\n\n5. **Title:** Verify API Robustness on Large-scale Tag Group Responses and Unexpected Query Parameters\n   - **API Endpoint:** GET /elements/length/groupBy/tag?tags=highway,railway,waterway&extra=unexpected\n   - **Description:** Issue a request including multiple comma-separated tags in the query (even if the API only supports one tag per request) and a spurious \u201cextra\u201d parameter to test how the API validates and handles unexpected or malformed query strings.\n   - **Expected Response:** Preferably HTTP 400 Bad Request for unsupported multi-tag parameter or unknown parameters, with a clear error message. If multi-tag is supported, expect a well-structured response with length data grouped by each tag separately. No server crashes or inconsistent data.\n\nSummary:\nThis test scenario probes the GET /elements/length/groupBy/tag endpoint\u2019s data consistency, input validation, concurrency handling, and error management through a sequence of logically linked calls. It tests stable aggregation outputs, proper handling of non-existent tags, robustness under concurrent access, and query parameter sanitization, thereby exposing potential defects such as data inconsistency, race conditions, and improper input validation.", "usage": {"total_tokens": 223746, "total_cost": 0.095754}, "unique_endpoints": {"200": [], "300": [], "400": ["GET /elements/length"], "500": 0}, "total_true_result": 0, "total_false_result": 6}