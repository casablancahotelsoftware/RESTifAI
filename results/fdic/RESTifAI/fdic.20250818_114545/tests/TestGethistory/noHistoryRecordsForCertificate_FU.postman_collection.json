{
    "info": {
        "name": "noHistoryRecordsForCertificate_FU",
        "description": "Set the filter to a certificate number of a bank that has no history records (e.g., CERT of a newly chartered bank with no events) to test querying history with no available data.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "searchInstitutions",
            "request": {
                "method": "GET",
                "header": [],
                "body": null,
                "cookies": [],
                "url": {
                    "raw": "{{baseUrl}}/institutions?filters=CERT%3A%22INVALID_CERT%23%40%21%22&search=NAME%3A%20Bank&fields=CERT,UNINUM,NAME,STNAME,DEP&sort_by=DEP&sort_order=DESC&limit=10&offset=0&format=json",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "institutions"
                    ],
                    "query": [
                        {
                            "key": "filters",
                            "value": "CERT%3A%22INVALID_CERT%23%40%21%22"
                        },
                        {
                            "key": "search",
                            "value": "NAME%3A%20Bank"
                        },
                        {
                            "key": "fields",
                            "value": "CERT,UNINUM,NAME,STNAME,DEP"
                        },
                        {
                            "key": "sort_by",
                            "value": "DEP"
                        },
                        {
                            "key": "sort_order",
                            "value": "DESC"
                        },
                        {
                            "key": "limit",
                            "value": "10"
                        },
                        {
                            "key": "offset",
                            "value": "0"
                        },
                        {
                            "key": "format",
                            "value": "json"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.test('Response status code is 4xx', function () {",
                            "    pm.expect(pm.response.code || pm.response.status).to.be.within(400, 499);",
                            "});"
                        ]
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.filters', 'CERT%3A%22INVALID_CERT%23%40%21%22');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.search', 'NAME%3A%20Bank');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.fields', 'CERT,UNINUM,NAME,STNAME,DEP');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.sort_by', 'DEP');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.sort_order', 'DESC');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.limit', 10);",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.offset', 0);",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.format', 'json');"
                        ]
                    }
                }
            ]
        },
        {
            "name": "searchLocations",
            "request": {
                "method": "GET",
                "header": [],
                "body": null,
                "cookies": [],
                "url": {
                    "raw": "{{baseUrl}}/locations?filters=CERT%3A%22INVALID_CERT%23%40%21%22&fields=LOCID,NAME,ADDRESS,CITY,STNAME,ZIP,PHONE&sort_by=CITY&sort_order=ASC&limit=10&offset=0&format=json&download=false&filename=locations_california_24735",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "locations"
                    ],
                    "query": [
                        {
                            "key": "filters",
                            "value": "CERT%3A%22INVALID_CERT%23%40%21%22"
                        },
                        {
                            "key": "fields",
                            "value": "LOCID,NAME,ADDRESS,CITY,STNAME,ZIP,PHONE"
                        },
                        {
                            "key": "sort_by",
                            "value": "CITY"
                        },
                        {
                            "key": "sort_order",
                            "value": "ASC"
                        },
                        {
                            "key": "limit",
                            "value": "10"
                        },
                        {
                            "key": "offset",
                            "value": "0"
                        },
                        {
                            "key": "format",
                            "value": "json"
                        },
                        {
                            "key": "download",
                            "value": "false"
                        },
                        {
                            "key": "filename",
                            "value": "locations_california_24735"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.test('Response status code is 4xx', function () {",
                            "    pm.expect(pm.response.code || pm.response.status).to.be.within(400, 499);",
                            "});"
                        ]
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.collectionVariables.set('searchLocations.request.query_params.filters', 'CERT%3A%22INVALID_CERT%23%40%21%22');",
                            "pm.collectionVariables.set('searchLocations.request.query_params.fields', 'LOCID,NAME,ADDRESS,CITY,STNAME,ZIP,PHONE');",
                            "pm.collectionVariables.set('searchLocations.request.query_params.sort_by', 'CITY');",
                            "pm.collectionVariables.set('searchLocations.request.query_params.sort_order', 'ASC');",
                            "pm.collectionVariables.set('searchLocations.request.query_params.limit', 10);",
                            "pm.collectionVariables.set('searchLocations.request.query_params.offset', 0);",
                            "pm.collectionVariables.set('searchLocations.request.query_params.format', 'json');",
                            "pm.collectionVariables.set('searchLocations.request.query_params.download', 'false');",
                            "pm.collectionVariables.set('searchLocations.request.query_params.filename', 'locations_california_24735');"
                        ]
                    }
                }
            ]
        },
        {
            "name": "getFinancials",
            "request": {
                "method": "GET",
                "header": [],
                "body": null,
                "cookies": [],
                "url": {
                    "raw": "{{baseUrl}}/financials?filters=CERT%3A%22INVALID_CERT%23%40%21%22&fields=ASSET,LIAB,DEP,NETINC,ROA,ROE&sort_by=ASSET&sort_order=DESC&limit=10&offset=0&agg_by=YEAR&agg_term_fields=STNAME&agg_sum_fields=ASSET,DEP,NETINC&agg_limit=5&format=json&download=false&filename=financials_24735",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "financials"
                    ],
                    "query": [
                        {
                            "key": "filters",
                            "value": "CERT%3A%22INVALID_CERT%23%40%21%22"
                        },
                        {
                            "key": "fields",
                            "value": "ASSET,LIAB,DEP,NETINC,ROA,ROE"
                        },
                        {
                            "key": "sort_by",
                            "value": "ASSET"
                        },
                        {
                            "key": "sort_order",
                            "value": "DESC"
                        },
                        {
                            "key": "limit",
                            "value": "10"
                        },
                        {
                            "key": "offset",
                            "value": "0"
                        },
                        {
                            "key": "agg_by",
                            "value": "YEAR"
                        },
                        {
                            "key": "agg_term_fields",
                            "value": "STNAME"
                        },
                        {
                            "key": "agg_sum_fields",
                            "value": "ASSET,DEP,NETINC"
                        },
                        {
                            "key": "agg_limit",
                            "value": "5"
                        },
                        {
                            "key": "format",
                            "value": "json"
                        },
                        {
                            "key": "download",
                            "value": "false"
                        },
                        {
                            "key": "filename",
                            "value": "financials_24735"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.test('Response status code is 4xx', function () {",
                            "    pm.expect(pm.response.code || pm.response.status).to.be.within(400, 499);",
                            "});"
                        ]
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.collectionVariables.set('getFinancials.request.query_params.filters', 'CERT%3A%22INVALID_CERT%23%40%21%22');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.fields', 'ASSET,LIAB,DEP,NETINC,ROA,ROE');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.sort_by', 'ASSET');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.sort_order', 'DESC');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.limit', 10);",
                            "pm.collectionVariables.set('getFinancials.request.query_params.offset', 0);",
                            "pm.collectionVariables.set('getFinancials.request.query_params.agg_by', 'YEAR');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.agg_term_fields', 'STNAME');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.agg_sum_fields', 'ASSET,DEP,NETINC');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.agg_limit', 5);",
                            "pm.collectionVariables.set('getFinancials.request.query_params.format', 'json');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.download', 'false');",
                            "pm.collectionVariables.set('getFinancials.request.query_params.filename', 'financials_24735');"
                        ]
                    }
                }
            ]
        },
        {
            "name": "getHistorical",
            "request": {
                "method": "GET",
                "header": [],
                "body": null,
                "cookies": [],
                "url": {
                    "raw": "{{baseUrl}}/summary?filters=CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22%20AND%20YEAR%3A%5B2015%20TO%202024%5D&fields=ASSET,DEP,NETINC,ROA,ROE&sort_by=YEAR&sort_order=DESC&limit=10&offset=0&agg_by=YEAR,STNAME&agg_term_fields=STNAME&agg_sum_fields=ASSET,DEP,NETINC&agg_limit=5&format=json",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "summary"
                    ],
                    "query": [
                        {
                            "key": "filters",
                            "value": "CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22%20AND%20YEAR%3A%5B2015%20TO%202024%5D"
                        },
                        {
                            "key": "fields",
                            "value": "ASSET,DEP,NETINC,ROA,ROE"
                        },
                        {
                            "key": "sort_by",
                            "value": "YEAR"
                        },
                        {
                            "key": "sort_order",
                            "value": "DESC"
                        },
                        {
                            "key": "limit",
                            "value": "10"
                        },
                        {
                            "key": "offset",
                            "value": "0"
                        },
                        {
                            "key": "agg_by",
                            "value": "YEAR,STNAME"
                        },
                        {
                            "key": "agg_term_fields",
                            "value": "STNAME"
                        },
                        {
                            "key": "agg_sum_fields",
                            "value": "ASSET,DEP,NETINC"
                        },
                        {
                            "key": "agg_limit",
                            "value": "5"
                        },
                        {
                            "key": "format",
                            "value": "json"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.test('Response status code is 4xx', function () {",
                            "    pm.expect(pm.response.code || pm.response.status).to.be.within(400, 499);",
                            "});"
                        ]
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.collectionVariables.set('getHistorical.request.query_params.filters', 'CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22%20AND%20YEAR%3A%5B2015%20TO%202024%5D');",
                            "pm.collectionVariables.set('getHistorical.request.query_params.fields', 'ASSET,DEP,NETINC,ROA,ROE');",
                            "pm.collectionVariables.set('getHistorical.request.query_params.sort_by', 'YEAR');",
                            "pm.collectionVariables.set('getHistorical.request.query_params.sort_order', 'DESC');",
                            "pm.collectionVariables.set('getHistorical.request.query_params.limit', 10);",
                            "pm.collectionVariables.set('getHistorical.request.query_params.offset', 0);",
                            "pm.collectionVariables.set('getHistorical.request.query_params.agg_by', 'YEAR,STNAME');",
                            "pm.collectionVariables.set('getHistorical.request.query_params.agg_term_fields', 'STNAME');",
                            "pm.collectionVariables.set('getHistorical.request.query_params.agg_sum_fields', 'ASSET,DEP,NETINC');",
                            "pm.collectionVariables.set('getHistorical.request.query_params.agg_limit', 5);",
                            "pm.collectionVariables.set('getHistorical.request.query_params.format', 'json');"
                        ]
                    }
                }
            ]
        },
        {
            "name": "getFailures",
            "request": {
                "method": "GET",
                "header": [],
                "body": null,
                "cookies": [],
                "url": {
                    "raw": "{{baseUrl}}/failures?filters=CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22&fields=CERT,NAME,FAILYR,FAILRSON,STNAME&sort_by=FAILYR&sort_order=DESC&limit=10&offset=0&total_fields=FAILAMT&subtotal_by=FAILRSON&agg_by=FAILYR,PSTALP&agg_term_fields=FAILRSON&agg_sum_fields=FAILAMT&agg_limit=5&format=json",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "failures"
                    ],
                    "query": [
                        {
                            "key": "filters",
                            "value": "CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22"
                        },
                        {
                            "key": "fields",
                            "value": "CERT,NAME,FAILYR,FAILRSON,STNAME"
                        },
                        {
                            "key": "sort_by",
                            "value": "FAILYR"
                        },
                        {
                            "key": "sort_order",
                            "value": "DESC"
                        },
                        {
                            "key": "limit",
                            "value": "10"
                        },
                        {
                            "key": "offset",
                            "value": "0"
                        },
                        {
                            "key": "total_fields",
                            "value": "FAILAMT"
                        },
                        {
                            "key": "subtotal_by",
                            "value": "FAILRSON"
                        },
                        {
                            "key": "agg_by",
                            "value": "FAILYR,PSTALP"
                        },
                        {
                            "key": "agg_term_fields",
                            "value": "FAILRSON"
                        },
                        {
                            "key": "agg_sum_fields",
                            "value": "FAILAMT"
                        },
                        {
                            "key": "agg_limit",
                            "value": "5"
                        },
                        {
                            "key": "format",
                            "value": "json"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.test('Response status code is 4xx', function () {",
                            "    pm.expect(pm.response.code || pm.response.status).to.be.within(400, 499);",
                            "});"
                        ]
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.collectionVariables.set('getFailures.request.query_params.filters', 'CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22');",
                            "pm.collectionVariables.set('getFailures.request.query_params.fields', 'CERT,NAME,FAILYR,FAILRSON,STNAME');",
                            "pm.collectionVariables.set('getFailures.request.query_params.sort_by', 'FAILYR');",
                            "pm.collectionVariables.set('getFailures.request.query_params.sort_order', 'DESC');",
                            "pm.collectionVariables.set('getFailures.request.query_params.limit', 10);",
                            "pm.collectionVariables.set('getFailures.request.query_params.offset', 0);",
                            "pm.collectionVariables.set('getFailures.request.query_params.total_fields', 'FAILAMT');",
                            "pm.collectionVariables.set('getFailures.request.query_params.subtotal_by', 'FAILRSON');",
                            "pm.collectionVariables.set('getFailures.request.query_params.agg_by', 'FAILYR,PSTALP');",
                            "pm.collectionVariables.set('getFailures.request.query_params.agg_term_fields', 'FAILRSON');",
                            "pm.collectionVariables.set('getFailures.request.query_params.agg_sum_fields', 'FAILAMT');",
                            "pm.collectionVariables.set('getFailures.request.query_params.agg_limit', 5);",
                            "pm.collectionVariables.set('getFailures.request.query_params.format', 'json');"
                        ]
                    }
                }
            ]
        },
        {
            "name": "getHistory",
            "request": {
                "method": "GET",
                "header": [],
                "body": null,
                "cookies": [],
                "url": {
                    "raw": "{{baseUrl}}/history?filters=CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22&search=NAME%3A%20%22Silicon%20Valley%20Bank%22&fields=CERT,NAME,STNAME,PROCDATE,EVENTTYPE,DETAILS&sort_by=PROCDATE&sort_order=DESC&limit=10&offset=0&agg_by=EVENTTYPE&agg_term_fields=STNAME&agg_limit=5&format=json",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "history"
                    ],
                    "query": [
                        {
                            "key": "filters",
                            "value": "CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22"
                        },
                        {
                            "key": "search",
                            "value": "NAME%3A%20%22Silicon%20Valley%20Bank%22"
                        },
                        {
                            "key": "fields",
                            "value": "CERT,NAME,STNAME,PROCDATE,EVENTTYPE,DETAILS"
                        },
                        {
                            "key": "sort_by",
                            "value": "PROCDATE"
                        },
                        {
                            "key": "sort_order",
                            "value": "DESC"
                        },
                        {
                            "key": "limit",
                            "value": "10"
                        },
                        {
                            "key": "offset",
                            "value": "0"
                        },
                        {
                            "key": "agg_by",
                            "value": "EVENTTYPE"
                        },
                        {
                            "key": "agg_term_fields",
                            "value": "STNAME"
                        },
                        {
                            "key": "agg_limit",
                            "value": "5"
                        },
                        {
                            "key": "format",
                            "value": "json"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.test('Response status code is 4xx', function () {",
                            "    pm.expect(pm.response.code || pm.response.status).to.be.within(400, 499);",
                            "});"
                        ]
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.collectionVariables.set('getHistory.request.query_params.filters', 'CERT%3A%22INVALID_CERT%23%40%21%22%20AND%20STNAME%3A%22California%22');",
                            "pm.collectionVariables.set('getHistory.request.query_params.search', 'NAME%3A%20%22Silicon%20Valley%20Bank%22');",
                            "pm.collectionVariables.set('getHistory.request.query_params.fields', 'CERT,NAME,STNAME,PROCDATE,EVENTTYPE,DETAILS');",
                            "pm.collectionVariables.set('getHistory.request.query_params.sort_by', 'PROCDATE');",
                            "pm.collectionVariables.set('getHistory.request.query_params.sort_order', 'DESC');",
                            "pm.collectionVariables.set('getHistory.request.query_params.limit', 10);",
                            "pm.collectionVariables.set('getHistory.request.query_params.offset', 0);",
                            "pm.collectionVariables.set('getHistory.request.query_params.agg_by', 'EVENTTYPE');",
                            "pm.collectionVariables.set('getHistory.request.query_params.agg_term_fields', 'STNAME');",
                            "pm.collectionVariables.set('getHistory.request.query_params.agg_limit', 5);",
                            "pm.collectionVariables.set('getHistory.request.query_params.format', 'json');"
                        ]
                    }
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "pm.environment.set('baseUrl', 'https://banks.data.fdic.gov/api');"
                ]
            }
        }
    ]
}