{
    "info": {
        "name": "sortByFieldNotInFieldsList_FU",
        "description": "Set the `sort_by` parameter to a field that is not included in the `fields` parameter, e.g., sort_by:\"DATEUPDT\" while fields only include [\"NAME\",\"STNAME\"], causing a logical inconsistency in sorting on unavailable fields.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "searchInstitutions",
            "request": {
                "method": "GET",
                "header": [],
                "body": null,
                "cookies": [],
                "url": {
                    "raw": "{{baseUrl}}/institutions?filters=STNAME%3A%22Virginia%22%20AND%20DEP%3A%5B50000%20TO%20%2A%5D&search=NAME%3A%20Island&fields=NAME,STNAME&sort_by=DATEUPDT&sort_order=DESC&limit=20&offset=0&format=json&download=false&filename=institutions_search_results",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "institutions"
                    ],
                    "query": [
                        {
                            "key": "filters",
                            "value": "STNAME%3A%22Virginia%22%20AND%20DEP%3A%5B50000%20TO%20%2A%5D"
                        },
                        {
                            "key": "search",
                            "value": "NAME%3A%20Island"
                        },
                        {
                            "key": "fields",
                            "value": "NAME,STNAME"
                        },
                        {
                            "key": "sort_by",
                            "value": "DATEUPDT"
                        },
                        {
                            "key": "sort_order",
                            "value": "DESC"
                        },
                        {
                            "key": "limit",
                            "value": "20"
                        },
                        {
                            "key": "offset",
                            "value": "0"
                        },
                        {
                            "key": "format",
                            "value": "json"
                        },
                        {
                            "key": "download",
                            "value": "false"
                        },
                        {
                            "key": "filename",
                            "value": "institutions_search_results"
                        }
                    ]
                }
            },
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.test('Response status code is 4xx', function () {",
                            "    pm.expect(pm.response.code || pm.response.status).to.be.within(400, 499);",
                            "});"
                        ]
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "type": "text/javascript",
                        "exec": [
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.filters', 'STNAME%3A%22Virginia%22%20AND%20DEP%3A%5B50000%20TO%20%2A%5D');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.search', 'NAME%3A%20Island');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.fields', 'NAME,STNAME');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.sort_by', 'DATEUPDT');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.sort_order', 'DESC');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.limit', 20);",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.offset', 0);",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.format', 'json');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.download', 'false');",
                            "pm.collectionVariables.set('searchInstitutions.request.query_params.filename', 'institutions_search_results');"
                        ]
                    }
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "pm.environment.set('baseUrl', 'https://banks.data.fdic.gov/api');"
                ]
            }
        }
    ]
}